<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RabbitMQ - Guia Interativo</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #fff5f0 0%, #ffe8d6 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding-top: 20px;
      }

      h1 {
        font-size: 3em;
        color: #ff6b35;
        margin-bottom: 10px;
      }

      .subtitle {
        color: #666;
        font-size: 1.2em;
      }

      .tabs {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 30px;
      }

      .tab {
        padding: 12px 24px;
        background: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .tab:hover {
        background: #ffe8d6;
        transform: translateY(-2px);
      }

      .tab.active {
        background: #ff6b35;
        color: white;
        box-shadow: 0 4px 10px rgba(255, 107, 53, 0.3);
      }

      .tab.completed::after {
        content: " ‚úì";
      }

      .content {
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        min-height: 500px;
      }

      .section {
        display: none;
      }

      .section.active {
        display: block;
        animation: fadeIn 0.5s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h2 {
        color: #333;
        font-size: 2.5em;
        margin-bottom: 20px;
      }

      .title h3 {
        color: black !important;
      }
      h3 {
        color: #ff6b35;
        font-size: 1.8em;
        margin-top: 30px;
        margin-bottom: 15px;
      }

      .info-box {
        background: #fff5f0;
        border-left: 4px solid #ff6b35;
        padding: 20px;
        margin: 20px 0;
        border-radius: 5px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .card {
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .card h4 {
        margin-bottom: 10px;
        font-size: 1.2em;
      }

      .blue {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        color: #0d47a1;
      }
      .green {
        background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        color: #1b5e20;
      }
      .purple {
        background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
        color: #4a148c;
      }
      .orange {
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        color: #e65100;
      }

      .code-block {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 10px;
        overflow-x: auto;
        margin: 20px 0;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 0.9em;
        line-height: 1.6;
        white-space: pre;
      }

      .code-editor {
        background: #1e1e1e;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .code-header {
        background: #2d2d30;
        padding: 10px 20px;
        color: #d4d4d4;
        font-weight: bold;
      }

      textarea {
        width: 100%;
        min-height: 250px;
        background: #1e1e1e;
        color: #d4d4d4;
        border: none;
        padding: 20px;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 0.9em;
        resize: vertical;
        line-height: 1.6;
      }

      .btn {
        padding: 12px 30px;
        background: #ff6b35;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s;
        margin: 10px 5px;
      }

      .btn:hover {
        background: #e85a28;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
      }

      .exercise-box {
        background: #fff3e0;
        border: 2px solid #ff6b35;
        border-radius: 10px;
        padding: 25px;
        margin: 30px 0;
      }

      .result {
        padding: 15px;
        border-radius: 5px;
        margin: 15px 0;
        font-weight: bold;
      }

      .result.success {
        background: #c8e6c9;
        color: #1b5e20;
      }

      .result.error {
        background: #ffcdd2;
        color: #c62828;
      }

      .queue-container {
        background: white;
        border-radius: 10px;
        padding: 30px;
        min-height: 250px;
        margin-top: 20px;
      }

      .message-item {
        background: #e3f2fd;
        border: 2px solid #2196f3;
        border-radius: 10px;
        padding: 20px;
        margin: 15px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .message-item.processing {
        background: #fff9c4;
        border-color: #ffc107;
        animation: pulse 1.5s infinite;
      }

      .message-item.consumed {
        background: #c8e6c9;
        border-color: #4caf50;
        opacity: 0.6;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
      }

      .progress-bar {
        background: #e0e0e0;
        height: 8px;
        border-radius: 10px;
        margin: 20px 0;
        overflow: hidden;
      }

      .progress-fill {
        background: linear-gradient(90deg, #ff6b35, #ffa726);
        height: 100%;
        transition: width 0.5s;
      }
            .image-container {
        text-align: center;
        margin: 30px 0;
        padding: 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
      }

      .diagram-image {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        transition: transform 0.3s ease;
      }

      .diagram-image:hover {
        transform: scale(1.02);
      }

      @media (max-width: 768px) {
        .diagram-image {
          max-width: 95%;
        }
        
        .image-container {
          margin: 20px 0;
          padding: 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üê∞ RabbitMQ</h1>
        <p class="subtitle">
          Sistema de Mensageria para Arquiteturas Distribu√≠das
        </p>
      </header>

      <div class="tabs">
        <button class="tab active" onclick="showSection('intro')">
          üìö Introdu√ß√£o
        </button>
        <button class="tab" onclick="showSection('concepts')">
          üéØ Conceitos
        </button>
        <button class="tab" onclick="showSection('code')">
          üíª C√≥digo Base
        </button>
        <button class="tab" onclick="showSection('exercises')">
          ‚úèÔ∏è Exerc√≠cios
        </button>
      </div>

      <div class="content">
        <!-- INTRODU√á√ÉO -->
        <div id="intro" class="section active">
          <h2>O que √© RabbitMQ?</h2>
          <div class="info-box">
            <p style="line-height: 1.8">
              RabbitMQ √© um <strong>message broker</strong> de c√≥digo aberto que
              implementa o protocolo
              <strong>Advanced Message Queuing Protocol (AMQP)</strong>. Ele
              atua como intermedi√°rio entre diferentes partes de um sistema,
              facilitando a comunica√ß√£o ass√≠ncrona.<br />
              <strong
                >Com o RabbitMQ, sistemas distribu√≠dos se comunicam de maneira
                eficiente.</strong
              >
            </p>
          </div>

          <h3>Por que usar RabbitMQ?</h3>
          <div class="grid">
            <div class="card blue">
              <h4>‚ö° Desacoplamento</h4>
              <p>
                Produtores e consumidores n√£o precisam conhecer uns aos outros
              </p>
            </div>
            <div class="card green">
              <h4>üìà Escalabilidade</h4>
              <p>
                Adicione mais consumidores para processar mensagens em paralelo
              </p>
            </div>
            <div class="card purple">
              <h4>üõ°Ô∏è Resili√™ncia</h4>
              <p>Mensagens persistem mesmo se o consumidor falhar</p>
            </div>
            <div class="card orange">
              <h4>üéØ Roteamento</h4>
              <p>Flexibilidade para rotear mensagens de v√°rias formas</p>
            </div>
          </div>
          <button
            class="btn"
            onclick="showSection('concepts'); markComplete('intro')"
          >
            Continuar ‚Üí
          </button>
        </div>

        <!-- CONCEITOS -->
        <div id="concepts" class="section">
          <h2>Conceitos Fundamentais</h2>
          <div class="info-box">
            <p style="line-height: 1.8">
              Antes de mergulharmos nos padr√µes e c√≥digo, vamos entender os
              principais componentes do RabbitMQ <br />
              <strong>
                RabbitMQ disponibiliza uma interface visual, usaremos ela para
                entender como as mensagens trafegam.</strong
              >
            </p>
          </div>
          </strong>

          <h3>Como o RabbitMQ funciona</h3>
          
          <div class="image-container">
            <img src="howRabbitMqWorks.png" alt="Como o RabbitMQ funciona" class="diagram-image">
          </div>

          <div class="info-box">
            <p style="line-height: 1.8">
              O produtor de mensagens envia mensagens para uma <strong>exchange</strong>,
              que as roteia para uma ou mais <strong>filas</strong>. Os
              consumidores ent√£o se conectam √†s filas para receber e processar
              as mensagens.
            </p>
          </div>
          <h4>Vamos entender o que s√£o esses componentes: Producers (Produtores), Exchanges, Queues (Filas) e Consumers (Consumidores) atrav√©s da interface visual do RabbitMQ. </h4>

          <h3>Rode o RabbitMQ na sua m√°quina com docker</h3>
          <div class="code-block">
            docker run -d --name rabbitmq -p 5672:5672 -p 15672:15672 -v ./data:/var/lib/rabbitmq rabbitmq:4.1.0-beta.3-management
          </div>

          <h3>Acesse http://localhost:15672</h3>
          <h4> Logue com  Usu√°rio: guest | Senha: guest</h4>
          <div class="image-container">
            <img src="./images/rabbitLogin.png" alt="Login RabbitMQ" class="diagram-image">
          </div>

          <div class="info-box">
            <h3 style="margin-top: 0">Exchange</h3>
            <p>
              Recebe mensagens dos produtores e as roteia para filas. Tipos:
              direct, fanout, etc...
            </p>
          </div>

          <div class="title">
            <h4>Navegue at√© exchanges e v√° para "Add new exchange"</h4>
          </div>
          <div class="image-container">
            <img src="./images/exchange.png" alt="exhange" class="diagram-image">
          </div>
            <h4>Clicando em type voc√™ perceber√° que existem diferentes tipos de exchanges, no momento n√≥s explicaremos apenas os tipos "direct" e "fanout".</h4>
            <br />
            <h4>Exchanges em tipo "direct"</h4>
            <p>Roteia mensagens para filas espec√≠ficas com base em uma chave de roteamento. Dessa maneira apenas consumidores espec√≠ficos recebem a mensagem.</p>
            <p>Na imagem abaixo apenas o "Consumer A" ou o "Consumer B" recebe a mensagem.</p>
            
            <div class="image-container">
              <img src="./images/direct.png" alt="exhange" class="diagram-image">
            </div>
            <h4>Exchanges em tipo "fanout"</h4>
            <p>Distribui mensagens para todas as filas ligadas a ela, ignorando a chave de roteamento.</p>
            <p>Na imagem acima "Consumer A" e "Consumer B" recebem a mensagem.</p>

            <br/>
            <h4>Para prosseguirmos vamos criar uma exchange, de um nome para a exchange no input "name", deixe ela com o type que preferir e clique em "Add exchange".</h4>
            <h4>Sua nova exchange aparecer√° na lista de exchanges (Acima de "Add a new exchange").</h4>


          <div class="info-box">
            <h3 style="margin-top: 0">Queue (Fila)</h3>
            <p>Buffer que armazena mensagens at√© serem consumidas.</p>
          </div>
            <h4>Navegue at√© "Queues and Streams" e v√° para "Add new queue"</h4>

            <div class="image-container">
              <img src="./images/queues.png" alt="exhange" class="diagram-image">
            </div>
            <h4>Para prosseguirmos vamos criar uma fila, de um nome para a fila no input "name" e clique em "Add queue".</h4>
            <br/>
            <h4>Nesse momento n√≥s temos a exchange e a queue criada</h4>
            <p>Agora vamos aprender a fazer essa conex√£o entre a exchange e a queue.</p>
            <div class="image-container">
              <img src="./images/connection.png" alt="exhange" class="diagram-image">
            </div>
            <h4>Para fazer isso clique no nome da fila que voc√™ criou.</h4>
            <h4>Voc√™ ser√° direcionado para a p√°gina de detalhes da fila.</h4>
            <div class="image-container">
              <img src="./images/QPanel.png" alt="exhange" class="diagram-image">
            </div>
            <h4>Role para baixo at√© encontrar "bindings", no campo "From exchange" digite a exchange que voc√™ criou anteriormente e clique em "Bind".</h4>
            <div class="image-container">
              <img src="./images/binding.png" alt="exhange" class="diagram-image">
            </div>
            
            
            <h4>Agora a fila est√° conectada a exchange!</h4>

            <div class="image-container">
              <img src="./images/binded.png" alt="exhange" class="diagram-image">
            </div>
            <h3>Agora vamos simular o envio de mensagens!</h3>
            <h4>Navegue at√© "Exchanges", clique na exchange que voc√™ criou e role para baixo at√© encontrar "Publish message".</h4>
            <div class="image-container">
              <img src="./images/publish.png" alt="exhange" class="diagram-image">
            </div>
            <h4>No campo "Payload" digite a mensagem que voc√™ deseja enviar e clique em "Publish message".</h4>

            <h4>Agora a mensagem foi enviada para a exchange!</h4>
            <h4>Navegue at√© "Queues and Streams" e clique na fila que voc√™ criou.</h4>
            <h4>V√° para a se√ß√£o "Get Messages"</h4>
            <div class="image-container">
              <img src="./images/getMessagesField.png" alt="exhange" class="diagram-image">
            </div>

            <h4>Clique em "Get Message" e ver√° sua mensagem</h4>
            <div class="image-container">
              <img src="./images/received.png" alt="exhange" class="diagram-image">
            </div>

            <h4>Parab√©ns! Voc√™ enviou e recebeu sua primeira mensagem usando RabbitMQ!</h4>

            <p>Nessa se√ß√£o existe algo interessante, repare no campo "Ack Mode", ele por padr√£o est√° configurado como "Nack Message". Isso significa que, se o consumidor n√£o reconhecer a mensagem, ela ser√° reenviada para a fila.</p>
            <p>Para que a mensagem seja consumida deixe em "Automatic ack".</p>


          <div class="info-box">
            <h3 style="margin-top: 0">Producer (Produtor)</h3>
            <p>Aplica√ß√£o que envia mensagens para o RabbitMQ.</p>
          </div>

          <div class="info-box">
            <h3 style="margin-top: 0">Consumer (Consumidor)</h3>
            <p>Aplica√ß√£o que recebe e processa mensagens.</p>
          </div>

          <button
            class="btn"
            onclick="showSection('code'); markComplete('concepts')"
          >
            Pr√≥ximo ‚Üí
          </button>
        </div>

        <!-- C√ìDIGO BASE -->
        <div id="code" class="section">
          <h2>üíª C√≥digo Base</h2>
          <h3>Instala√ß√£o</h3>
          <p>Crie um projeto novo no seu editor de c√≥digo desejado e instale a biblioteca Pika.</p>
          <div class="code-block">
            pip install pika
          </div>

          <h3>Producer.py (Base)</h3>
          <p>Classe respons√°vel por enviar mensagens para a fila.</p>
          <p>"self.__exchange" Precisa ser igual ao nome da exchange que voc√™ criou.</p>
          <p>Comando para rodar: <code>python producer.py</code></p>
          <div class="code-block">
            from typing import Dict  # Usado para indicar que o par√¢metro ser√° um dicion√°rio
            import pika              # Biblioteca utilizada para se comunicar com o RabbitMQ
            import json              # Usado para converter o corpo da mensagem em JSON


            class RabbitmqPublisher:
                def __init__(self):
                    # Configura√ß√µes b√°sicas de conex√£o com o RabbitMQ
                    self.__host = "localhost"     # Endere√ßo do servidor RabbitMQ
                    self.__port = 5672            # Porta padr√£o do RabbitMQ
                    self.__username = "guest"     # Usu√°rio padr√£o do RabbitMQ
                    self.__password = "guest"     # Senha padr√£o do RabbitMQ

                    # Cria o canal de comunica√ß√£o com o RabbitMQ
                    self.__channel = self.__create_channel()

                    # Define o exchange (ponto intermedi√°rio onde as mensagens s√£o enviadas)
                    self.__exchange = "my_exchange"

                    # Define a routing key (usada para direcionar a mensagem para uma fila espec√≠fica)
                    self.__routingKey = ""

                def __create_channel(self):
                    # Cria os par√¢metros de conex√£o com o RabbitMQ
                    connection_parameters = pika.ConnectionParameters(
                        host=self.__host,
                        port=self.__port,
                        credentials=pika.PlainCredentials(
                            username=self.__username,
                            password=self.__password
                        )
                    )

                    # Estabelece uma conex√£o com o RabbitMQ
                    # e cria um canal de comunica√ß√£o para enviar mensagens
                    channel = pika.BlockingConnection(connection_parameters).channel()

                    # Retorna o canal criado para ser usado na publica√ß√£o
                    return channel

                def send_message(self, body: Dict):
                    # Publica uma mensagem no exchange definido
                    # body: dicion√°rio contendo os dados a serem enviados

                    self.__channel.basic_publish(
                        exchange=self.__exchange,        # Exchange configurado para envio
                        routing_key=self.__routingKey,   # Routing key (fila de destino)
                        body=json.dumps(body),           # Converte o corpo da mensagem para JSON
                        properties=pika.BasicProperties(
                            delivery_mode=2               # Define persist√™ncia da mensagem no broker
                        )
                    )


            # Instancia a classe RabbitmqPublisher
            publisher = RabbitmqPublisher()

            # Envia uma mensagem simples em formato JSON para o RabbitMQ
            publisher.send_message({"ola": "mundo"})


          </div>

          <h3>Consumer.py (Base)</h3>
          <p>Classe respons√°vel por receber mensagens da fila.</p>
          <p>"self.__queue" Precisa ser igual ao nome da fila que voc√™ criou.</p>
          <p>Comando para rodar: <code>python consumer.py</code></p>
          <div class="code-block">
          import pika  # Biblioteca usada para comunica√ß√£o com o RabbitMQ

          class RabbitmqConsumer:
              def __init__(self, callback):
                  # Configura√ß√µes b√°sicas de conex√£o com o RabbitMQ
                  self.__host = "localhost"     # Endere√ßo do servidor RabbitMQ
                  self.__port = 5672            # Porta padr√£o do RabbitMQ
                  self.__username = "guest"     # Usu√°rio padr√£o
                  self.__password = "guest"     # Senha padr√£o
                  self.__queue = "my_queue"     # Nome da fila a ser consumida
                  self.__callback = callback    # Fun√ß√£o callback executada ao receber uma mensagem

                  # Cria o canal de comunica√ß√£o com o RabbitMQ
                  self.__channel = self.__create_channel()

              def __create_channel(self):
                  # Define os par√¢metros de conex√£o (host, porta e credenciais)
                  connection_parameters = pika.ConnectionParameters(
                      host=self.__host,
                      port=self.__port,
                      credentials=pika.PlainCredentials(
                          username=self.__username,
                          password=self.__password
                      )
                  )

                  # Estabelece a conex√£o com o RabbitMQ
                  channel = pika.BlockingConnection(connection_parameters).channel()

                  # Declara a fila (se n√£o existir, ela ser√° criada)
                  # durable=True garante que a fila persista mesmo ap√≥s reiniciar o RabbitMQ
                  channel.queue_declare(
                      queue=self.__queue,
                      durable=True
                  )

                  # Define o consumo da fila:
                  # - auto_ack=True: confirma automaticamente o recebimento da mensagem
                  # - on_message_callback: fun√ß√£o que ser√° chamada ao receber uma nova mensagem
                  channel.basic_consume(
                      queue=self.__queue,
                      auto_ack=True,
                      on_message_callback=self.__callback
                  )

                  # Retorna o canal configurado
                  return channel

              def start(self):
                  # Exibe mensagem informando que o consumidor est√° escutando a fila
                  print('listen rabbit on port 5672')

                  # Inicia o consumo de mensagens (loop bloqueante)
                  # Este m√©todo ficar√° ativo at√© ser interrompido manualmente (Ctrl+C)
                  self.__channel.start_consuming()


          # Fun√ß√£o callback chamada sempre que uma nova mensagem √© recebida
          # Os par√¢metros s√£o definidos pela API do pika:
          # - ch: canal de comunica√ß√£o
          # - method: informa√ß√µes sobre o m√©todo de entrega
          # - properties: propriedades da mensagem
          # - body: corpo da mensagem (conte√∫do enviado pelo publisher)
          def minha_callback(ch, method, properties, body):
              print(body)  # Exibe o conte√∫do da mensagem recebida


          # Cria uma inst√¢ncia do consumidor passando a fun√ß√£o callback
          rabbitmq_consumer = RabbitmqConsumer(minha_callback)

          # Inicia o processo de consumo de mensagens
          rabbitmq_consumer.start()


          </div>

          <button
            class="btn"
            onclick="showSection('exercises'); markComplete('code')"
          >
            Fazer Exerc√≠cios ‚Üí
          </button>
        </div>

        <!-- EXERC√çCIOS -->
        <div id="exercises" class="section">
          <h2>‚úèÔ∏è Exerc√≠cios Pr√°ticos</h2>

          <div class="exercise-box">
            <h3 style="color: #e65100">Exerc√≠cio 1: Fanout Exchange</h3>
            <p><strong>Objetivo:</strong> Crie uma exchange do tipo Fanout e fa√ßa a mensagem ir para dois consumidores ao mesmo tempo</p>
          </div>

          <div class="exercise-box">
            <h3 style="color: #e65100">Exerc√≠cio 2: Direct Exchange</h3>
            <p><strong>Objetivo:</strong> Crie uma exchange do tipo direct e fa√ßa a mensagem ir para um consumidor espec√≠fico</p>
          </div>

          <div class="exercise-box">
            <h3 style="color: #e65100">Exerc√≠cio 3: Alerta Ass√≠ncrono de Queda de Servi√ßo via RabbitMQ. </h3>
            <br></br>
            <p><strong>Objetivo:</strong> Usando o c√≥digo da atividade de Websockets como base, implemente um sistema de mensagens com RabbitMQ</p>
            <br></br>
            <p>Voc√™ deve criar uma maneira de que sempre que um servi√ßo esteja indispon√≠vel, o sistema de monitoramento avisa outro sistema de que o servi√ßo caiu e que deve avisar os respons√°veis por ele.</p>
            <br></br>
            <p>Seu c√≥digo n√£o deve ser respons√°vel por alertar o usu√°rio que o servi√ßo caiu, sua responsabilidade √© fazer a comunica√ß√£o entre o servi√ßo de monitoramento e o servi√ßo de notifica√ß√£o que voc√™ criar√°.</p>
            <br></br>
            <h4>Exemplo de arquitetura de como deve ficar seu sistema</h4>
            <div class="image-container">
              <img src="./images/arqExample.png" alt="exhange" class="diagram-image">
            </div>
              
          </div>

      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progress" style="width: 0%"></div>
      </div>

      <footer
        style="
          text-align: center;
          margin-top: 40px;
          color: #666;
          padding-bottom: 20px;
        "
      >
        <p id="footerText">Progresso: 0 de 4 t√≥picos</p>
      </footer>
    </div>

    <script>
      let queue = [];
      let counter = 0;
      let completed = [];

      function showSection(id) {
        document
          .querySelectorAll(".section")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(id).classList.add("active");
        document
          .querySelectorAll(".tab")
          .forEach((t) => t.classList.remove("active"));
        
        // Ativar a aba correspondente
        const tabNames = ['intro', 'concepts', 'code', 'exercises'];
        const tabIndex = tabNames.indexOf(id);
        if (tabIndex !== -1) {
          document.querySelectorAll(".tab")[tabIndex].classList.add("active");
        }
        
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function markComplete(id) {
        if (!completed.includes(id)) {
          completed.push(id);
          updateProgress();
          const tabs = document.querySelectorAll(".tab");
          const idx = [
            "intro",
            "concepts", 
            "code",
            "exercises"
          ].indexOf(id);
          if (idx !== -1) tabs[idx].classList.add("completed");
        }
      }

      function updateProgress() {
        const pct = (completed.length / 4) * 100;
        document.getElementById("progress").style.width = pct + "%";
        document.getElementById(
          "footerText"
        ).textContent = `Progresso: ${completed.length} de 4 t√≥picos`;
      }


      function sendMessage() {
        counter++;
        queue.push({ id: counter, status: "queue" });
        updateQueue();
      }

      function consumeMessage() {
        if (queue.length === 0) return;
        queue[0].status = "processing";
        updateQueue();
        setTimeout(() => {
          queue[0].status = "consumed";
          updateQueue();
          setTimeout(() => {
            queue.shift();
            updateQueue();
          }, 1000);
        }, 1500);
      }

      function clearQueue() {
        queue = [];
        counter = 0;
        updateQueue();
      }

      function updateQueue() {
        const display = document.getElementById("queue");
        const count = document.getElementById("count");
        count.textContent = `${queue.length} mensagens`;

        if (queue.length === 0) {
          display.innerHTML =
            '<div style="text-align:center; color:#999; padding:40px;">Fila vazia</div>';
          return;
        }

        display.innerHTML = queue
          .map((m, i) => {
            let cls = "message-item";
            let status = "Na Fila";
            if (m.status === "processing") {
              cls += " processing";
              status = "Processando";
            } else if (m.status === "consumed") {
              cls += " consumed";
              status = "Consumida";
            }
            return `<div class="${cls}">
                    <div><strong>Pedido #${1000 + i + 1}</strong></div>
                    <div style="padding: 6px 16px; border-radius: 20px; background: #bbdefb;">${status}</div>
                </div>`;
          })
          .join("");
      }

      function runAuto() {
        clearQueue();
        setTimeout(() => sendMessage(), 0);
        setTimeout(() => sendMessage(), 1500);
        setTimeout(() => consumeMessage(), 3000);
        setTimeout(() => sendMessage(), 4500);
        setTimeout(() => consumeMessage(), 6000);
      }

      updateQueue();
    </script>
  </body>
</html>
